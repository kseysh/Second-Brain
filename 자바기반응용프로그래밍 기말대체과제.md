---
sticker: emoji//270f-fe0f
---
<div style="text-align: center; font-size:30;font-weight:bold ">자바기반응용프로그래밍 기말대체과제</div>

<div style="text-align: right">컴퓨터공학과 12201709 김승환</div>

# 1. 프로그램에 관련된 설명
아이유를 픽셀로 만들어 아이유 음표 피하기 게임을 구현했습니다.
각 화면마다 노래가 나오게 되며, 게임을 마치게 되면 스코어가 txt 파일에 저장됩니다.
자세한 설명은 동작 과정과 사용 방법을 설명하며 자세히 설명하도록 하겠습니다.
# 2. 동작 과정과 사용 방법
## Home 화면
![[Pasted image 20231222020748.png]]
홈 화면 입니다.
각 화면마다 다른 노래가 나옵니다. 홈 화면에서는 아이유님의 삐삐노래가 비트 형식으로 나오게 됩니다.
각 Start 버튼은 난이도 조절에 관련되어 있습니다. 난이도는 0부터 9까지 10개의 난이도로 구성되어 있으며, 난이도는 시간이 지남에 따라 올라가게 됩니다.
초록색 Start 버튼은 난이도 0부터 시작하며, 노란색 Start 버튼은 난이도 3부터, 빨간색 버튼은 난이도 6부터 게임을 시작하게 됩니다.
## Game 화면
아이유님의 비트 형식의 삐삐 노래가 정지되고, 아이유님의 삐삐 노래의 반주가 나오면서 Game 화면이 시작합니다.
아이유 캐릭터는 체력을 두 개 가진 채로 시작합니다. Game 화면을 보시게되면 좌측에 보라색 하트를 보실 수 있는데 이것이 아이유의 체력입니다. 위에 떨어지고 있는 음표에 타격되게 되면 하트는 하나씩 줄어들고, 하트가 모두 줄어들어 0이 되면 게임이 종료됩니다.

아이유는 움직일 때 keyAdapter에서 Override한 keyPressed 함수를 통해 부드러운 걸음걸이 모션을 구현했습니다.
또한 움직임을 멈추면 keyReleased 함수를 이용해 다시 서있는 아이유 캐릭터로 돌아가도록 구현하였습니다.
![[Pasted image 20231222023508.png]]

아래는 이를 구현한 코드입니다.
![[Pasted image 20231222032938.png]]
![[Pasted image 20231222032955.png]]

아래부터는 게임 내에서 볼 수 있는 객체들입니다.
![[Pasted image 20231222024051.png]]
Music note : 아이유 캐릭터와 충돌하게 되면 아이유의 체력이 1 감소합니다. 충돌 시 4초간 무적상태가 됩니다.
Heart : 아이유 캐릭터의 체력을 1 증가시킵니다. 아이유의 최대 체력은 3입니다.
Crown : 게임 내의 점수를 500 증가시킵니다.
Star : Music note에 피격되지 않는 무적 상태가 됩니다. 10초간 지속됩니다.
Red shoes : 아이유 캐릭터의 이동 속도를 두 배 증가시킵니다. 8초간 지속됩니다.
Yellow card : 화면에 있는 Music note들을 모두 삭제합니다.

아래에서 게임 내에서 확인할 수 있는 아이템들을 보여드리도록 하겠습니다.

![[Pasted image 20231222021151.png]]
초록색 버튼을 눌러 난이도 0부터 시작했을 때의 캡쳐입니다. 
console창을 통해 파악하고자 하는 상호작용을 출력하였습니다.
Score는 0부터 시작해서 note가 하나 생성될 때마다 10씩 증가하게 됩니다. 따라서 화면에서 8개의 Music note가 있고, Score가 80인 것을 확인하실 수 있습니다. 

아래는 난이도를 설정하는 코드입니다. 노트를 생성하는 Delay를 관리하는 Array와 노트가 떨어질 때의 속도를 관리하는 Array를 만들어 0번째 난이도일때는 두 Array모두 Array의 0번째 값을 가져와 사용할 수 있도록 난이도 조절함수를 만들었습니다. 
![[Pasted image 20231222033036.png]]

또한 아래는 음표 및 아이템들을 움직이는 함수입니다. 내부 구현은 점수에 포함되지 않아 리팩토링을 하지 않았고, 이에 따라 코드가 길고 가독성이 떨어진다는 점 양해해주신다면 감사할 것 같습니다.
아래 코드의 부분은 music note가 움직이며 standIU 객체와 충돌하였을 때 IULife가 1 감소하는 부분입니다.
IULife가 1 감소한 이후 4초동안 canDecreaseLife를 false로 만들어 체력을 4초동안 감소시키지 못하게 하였습니다.
![[Pasted image 20231222033322.png]]

![[Pasted image 20231222021635.png]]
Heart, Yellow card, Crown, Star 4가지 아이템들을 확인하실 수 있습니다.

아래는 Crown 아이템과  IU 객체가 충돌시에 gameScore를 500 증가시키는 코드입니다.
![[Pasted image 20231222033745.png]]

아래는 Star 아이템과 IU 객체가 충돌시에 canDecreaseLife를 10초 동안 false로 만들어 체력이 10초동안 감소되지 않도록 하는 코드입니다. isNotStarTime이 필요한 이유는 canDecreaseLife가 false일 때 Music note객체가 IU 객체와 충돌하게 되면, 4초 무적이 된 후 canDecreaseLife가 true로 변경되어 버리기 때문에 이를 방지하고자 isNotStarTime도 함께 false로 만든 후 10초 뒤 canDecreaseLife와 true가 되도록 코드를 작성하였습니다.
![[Pasted image 20231222033815.png]]

아래는 Yellow card 객체와 IU 객체가 충돌하였을 때 현재 생성되어 있는 모든 Music Note 객체를 삭제하는 코드입니다. 아이유 객체는 옐로 카드를 들고있는 ImageIcon으로 변경되며, 모든 Container 내부에서 JLabel 중 icon의 이름이 music-note.png인 모든 객체를 삭제하는 코드로 작성했습니다. Component중 music note만을 구분하는 부분은 chat-gpt를 이용하여 구현하였습니다.
![[Pasted image 20231222034144.png]]

![[Pasted image 20231222021331.png]]
하트 아이템을 먹게되면 하트가 하나 증가하게 됩니다. 
하트를 하나 사용하여 최대 체력인 3이 된 모습을 확인하실 수 있습니다.
아래와 같은 코드로 하트 객체와 IU 객체가 충돌시 IULife를 1 증가시킵니다. IU 객체의 최대 체력은 3이므로 이를 넘을 수 없도록 코드를 작성하였습니다.
![[Pasted image 20231222033621.png]]

![[Pasted image 20231222021555.png]]
Yellow Card를 사용한 모습입니다. 아이유 캐릭터는 옐로 카드를 들고있는 모습으로 변하며(이동 시 바로 움직이는 모션으로 변합니다.), 옐로카드를 사용하기 전 생성되었던 모든 Music note를 삭제합니다. (따라서 아이템만 남은 모습을 보실 수 있습니다.)
또한 Red shoes 아이템도 확인하실 수 있습니다.

아래는 Red shoes 객체와 IU 객체가 충돌했을 때 IU 객체의 movingSpeed를 7에서 15로 8초간 증가시키는 코드입니다. movingSpeed는 keyPressed시에 IU 객체가 이동되는 x 부분의 크기입니다.
![[Pasted image 20231222034513.png]]

체력이 1 남았을 때 Music Note와 충돌하게 되면 게임이 끝나서 Result 화면으로 이동하게 됩니다.
다음으로는 Result 화면에 대해 설명드리겠습니다.
## Result 화면
아이유님의 삐삐 반주가 정지되고, 마리오게임에서의 Game Over 효과음이 재생됩니다.

![[Pasted image 20231222021655.png]]
Game이 끝나고 확인하실 수 있는 Result 화면입니다.
Start 버튼을 누르면 이전에 했던 난이도와 같은 난이도로 Game화면으로 돌아가 다시 게임을 시작하실 수 있습니다.
가운데 Home 버튼을 누르면 Home 화면으로 돌아가게 됩니다.
오른쪽 Exit 버튼을 누르면 화면이 종료되게 됩니다.
Score 버튼은 아래에서 자세히 설명하겠습니다.

![[Pasted image 20231222021710.png]]
이름 작성 칸에 이름을 작성하고 Score 버튼을 누르게 되면 작성한 이름과 플레이한 점수가 저장되며 Score 화면으로 이동하게 됩니다. 

아래는 score button을 생성하는 코드입니다.
button을 누르게 되면 ActionListener를 이용해 nameField에서 입력된 이름과 resultScore를 FileWriter를 이용하여 파일의 맨 뒷줄에 입력한 후, ScoreView로 이동하며, 음악을 중지하고 dispose 함수를 통해 창을 닫고 다른 JFrame을 생성하는 모습을 보실 수 있습니다.
![[Pasted image 20231222034841.png]]

저장된 이름을 확인하는 것은 다음 화면에서 더 설명하도록 하겠습니다. 
## Score 화면
마리오 Game Over 노래가 중지되고, score화면에서의 노래가 재생됩니다.

![[Pasted image 20231222021725.png]]
이전 화면에서 score라는 이름을 작성한 후, SCORE 버튼을 누르고 이동한 화면입니다. 2740점의 점수로 3등에 랭크되어 있는 모습을 확인하실 수 있습니다. 이 LEADERBOARD는 지금까지 게임을 진행한 사람들 중 가장 점수가 높은 플레이어 6명의 이름과 점수를 확인할 수 있습니다. 

아래는 score의 순위를 계산하고 출력하는 코드입니다. HashMap을 이용해 score.txt에 작성되어 있는 플레이어의 이름과 점수를 HashMap에 저장하고, value값을 이용하여 이를 오름차순으로 정렬하고 상위 6명의 플레이어를 출력하여 JLabel로 만들고 이를 적절한 위치에 배치하는 코드입니다.
![[Pasted image 20231222035202.png]]
![[Pasted image 20231222035235.png]]

게임을 진행한 모든 사람들의 이름과 점수는 score.txt 파일에 따로 저장되어 있습니다. 이는 아래 캡쳐 화면에서 확인하실 수 있습니다.
![[Pasted image 20231222021748.png]]
지금까지 29명의 플레이어가 있었으며, score는 이 중 29번째 플레이어였습니다. 이 중 가장 높은 점수를 획득했던 6명을 LEADERBOARD에서 확인할 수 있었습니다.
# 참고한 블로그 및 유튜브
음악 재생을 위해 참고한 블로그입니다 
(https://blog.naver.com/vest2004/130180280903) 

아이유 캐릭터 디자인 소스 및 배경화면 그리고 음악까지 게임을 제작하는 데 큰 도움이 되었던 유튜브입니다. 
(https://www.youtube.com/watch?v=8SzWpVLC9-w)