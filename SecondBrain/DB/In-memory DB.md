대표적인 데이터베이스로는 [[RDB]], [NoSQL], In-Memory DB로 총 세 가지가 있다.

## In-Memory DB의 특징

- Memory같은 주 기억 장치에 데이터를 저장한다.
- NoSQL에 속하는 데이터베이스다. Key-Value 형식으로 데이터를 저장한다.
- Memory의 특성때문에 데이터가 휘발성이며, I/O의 속도가 매우 빠르다. (key, value 형태를 가지고 있어 조회 성능이 O(1)까지 나온다
- 상대적으로 다룰 수 있는 용량의 크기가 제한적이다.
- 보조기억장치가 없는 임베디드 장치에도 적용할 수 있다.
- 기존 DB와는 다르게 메모리에서 무작위로 데이터를 저장하기 때문에 저장 구조가 간단하다.  
- 대표적인 것으로 Redis, Memcached가 있다.
## 메모리 계층 구조
![[Pasted image 20240209114850.png]]
[[캐싱]]
## 메모리(램)의 특징

메모리의 특징은 전원이 꺼질 경우 데이터가 모조리 날라가는 휘발성 이라는 것

그리고 위에서 언급한 것처럼 데이터를 통신하기 위해서는 물리적 거리가 중요한데,  
램은 CPU와 물리적으로 가까워서 데이터를 처리하는 것이 매우 빠르다.

반대로 보조기억장치라 부르는 HDD(하드디스크)와 SSD(스스디)의 경우에는  
전원이 꺼져도 데이터가 날라가지 않는 비휘발성의 속성을 가지고 있고  
CPU와의 거리가 상당히 멀기 때문에 데이터를 처리하는 속도가 느리다.

## Memcached의 특징
- 데이터 타입을 String만 지원한다.
- 데이터 저장은 오직 메모리에만 저장한다.
    - 이러한 이유로 메모리가 부족할 경우 일부 데이터를 삭제하여 메모리를 사용한다.
    - 메모리에만 저장을 할 수 있기에 복제가 불가능하여 캐시로만 사용을 할 수 있다.
- 멀티쓰레드를 지원한다.
- 캐시 용량은 Key는 250byte, Value는 1MB를 지원한다.
- 수평적 확장이 가능하다.
> 작은 데이터를 임시저장하는 것에 강점을 가진다.
> 멀티쓰레드를 활용하여 다중처리가 빠르다
## Redis의 특징
- 데이터 타입은 String, Set, List, Sorted set, Hash, Bit arr, HyperLog, Stream을 지원한다.
- 데이터 저장은 메모리를 포함하여 디스크에도 저장을 할 수 있다.
- 스냅샷을 통해서 디스크에 담을 수 있는데 이를 통해서 비휘발성의 특징도 가지고 있다.
    - 반복적인 스냅샷을 통하여 디스크에 저장해 메모리의 여유 공간을 만들 수 있다.
- 싱글쓰레드를 지원한다.
- 캐시 용량은 Key와 Value 모두 512MB를 지원한다.
- 데이터를 복제하고, 들어온 데이터를 실시간 업데이트가 가능하여 서버 복제가 가능하다.
    - 이러한 이유로 스토리지로도 사용할 수 있다.
- Lua 익스텐션을 지원해서 로직을 만들어서 적용시킬 수 있다.
- ACID를 유사하게 지원해서 트랜잭션을 걸 수 있다.

## Refresh 토큰을 저장할 때 사용되는 이유
- 우선 RDB와는 다르게 데이터의 만료일을 지정할 수 있다.  
	  이를 TTL(Time-To-Live)이라고 하는데, 이를 토큰의 만료일과 똑같이 맞춰두어 관리하면 토큰이 만료되면 Redis에서도 토큰이 삭제되도록 하여 데이터를 효율적으로 관리할 수 있다.
  - 대체로 30분~2시간 단위로 갱신하는 JWT Access Token은 새롭게 갱신하기 위해 Refresh Token이 필요합니다.  
    이렇게 호출의 빈도가 대체적으로 높은 Refresh Token은 **RDB**에 저장하는 것보다 **In-Memory DB**에 저장해두고 사용하는 것이 훨씬 속도가 빠르고 토큰 **ReIssue** 로직의 **병목현상**을 방지할 수 있다습니다.
  