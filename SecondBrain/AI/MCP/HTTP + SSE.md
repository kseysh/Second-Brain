## HTTP + SSE
Server Sent Events를 의미하며 서버가 실시간 업데이터를 클라이언트에 전송할 수 있는 HTTP 서버 푸시 기술
![[Pasted image 20251001214736.png|300]]
### 사용 이유
HTTP는 자주 연결을 설정해야 하므로 오버헤드가 크고 latency가 높지만, MCP는 지속적이고 latency가 낮은 데이터 스트림 필요
MCP는 양방향 메시지 통신을 위해 Server -> Client의 경우 SSE, Client -> Server 는 HTTP POST를 사용한다.

## 한계
- 스트림이 끊어졌을 때, 복구를 지원하지 않음
- 따라서 서버가 장시간 유지되고 고가용성을 갖춘 연결을 유지해야 함
- 서버 메시지 전송이 SSE를 통해서만 가능함

## 사용 방법
#### Client가 Server로 SSE 연결
클라이언트가 SSE 스트림 연결을 수립하기 위해 MCP 서버의 SSE 엔드포인트로 HTTP GET 요청을 보낸다.
- 이 요청이 성공하면 클라이언트는 서버로부터 지속적으로 메시지를 받는 통로를 열어둔 상태가 되며, 이 연결은 일반 HTTP와 달리 끊기지 않음. 
- 즉, 서버는 연결을 유지한 채로, text/event-stream 포맷으로 지속적인 이벤트 스트림을 클라이언트에 보냄
#### Server가 Client로 Endpoint 이벤트 전송
클라이언트가 연결 설정 시 서버는 endpoint 이벤트를 전송한다.
- 이 이벤트에는 클라이언트가 메시지를 전송할 때 사용할 URI를 포함한다.
- 이후 모든 클라이언트 메시지는 해당 엔드포인트로 HTTP POST 요청을 보낸다.
#### Client가 Server로 메시지 전송
클라이언트가 서버에서 받은 URI로 POST 요청을 보내며, 요청의 본문에는 JSON 형식의 데이터가 포함됨
#### 서버는 클라이언트에게 응답하기 위해 SSE 스트림을 통해 message 이벤트를 보냄