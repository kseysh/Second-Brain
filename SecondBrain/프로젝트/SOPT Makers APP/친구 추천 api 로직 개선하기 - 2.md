## 현재 prod 서버에서의 부하 테스트

스레드 수 100
Ramp-up 1
roop count 1
로 요청을 보낸 결과
![[Pasted image 20240624214419.png]]
![[Pasted image 20240624214531.png]]

# 캐시 전략
캐싱 전략은 웹 서비스 환경에서 메모리를 사용해서 데이터베이스보다 훨씬 빠르게 데이터를 응답할 수 있어 이용자에게 빠르게 서비스를 제공할 수 있는 중요한 기술입니다.
하지만 메모리의 용량에는 한계가 있어 데이터를 모두 캐시에 저장해버리면 용량 부족 현상이 일어나 시스템이 다운될 수도 있어요.
현재 Makers에서는 메모리 941MB, 스왑 메모리 2GB를 활용하고 있어 메모리가 충분하지는 않은 환경입니다. 따라서 어느 종류의 데이터를 캐시에 저장할지, 얼만큼 데이터를 캐시에 저장할지, 얼마동안 오래된 데이터를 캐시에서 제거하는지에 대한 전략에 대해서도 알아보려고 해요.
## 캐싱의 문제점
캐싱을 사용하면 데이터 정합성이라는 문제가 발생할 수 있어요. 어느 한 데이터가 캐시와 데이터베이스에서 같은 데이터를 요청했음에도 데이터 정보 값이 다를 수도 있다는 의미에요. 따라서 적절한 캐시 읽기 전략과 캐시 쓰기 전략을 활용하여 캐시와 DB간의 데이터 불일치 문제를 극복하면서도 빠른 성능을 잃지 않도록 하려고 합니다.

## 캐시 전략 선택하기
현재 makers는 was 서버 한 대로 서비스하고 있어 로컬 캐시를 사용하여도 된다. 하지만 scale-out 가능성을 감안해 Redis를 이용한 글로벌 캐시를 사용해보도록 한다.

## 캐시 읽기 전략
### Look Aside
데이터를 찾을 때 우선 캐시에 저장된 데이터가 있는지 우선적으로 확인하는 전략입니다. 만일 캐시에 데이터가 없으면 DB에서 조회해요.
반복적인 읽기가 많은 호출에 적합합니다.
캐시와 DB가 분리되어 가용되기 때문에 원하는 데이터만 별도로 구성하여 캐시에 저장할 수 있으며, 캐시 장애 대비 구성이 되어 있어요. (redis가 다운되더라도 DB에서 데이터를 가져올 수 있어요.)
### Read Through
캐시에서만 데이터를 읽어오는 전략
