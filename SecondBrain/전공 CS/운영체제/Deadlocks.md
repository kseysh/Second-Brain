## 시스템 모델
•	시스템은 자원들로 구성됨
•	자원 유형: R1, R2, …, Rm
	•	예: CPU 사이클, 메모리 공간, I/O 장치
•	각 자원 유형 Ri는 Wi 개의 인스턴스를 가짐
•	각 프로세스는 자원을 다음과 같은 방식으로 사용함
	•	요청
	•	사용
	•	반환
## 교착 상태 (Deadlock)
•	교착 상태의 정의
	•	하나의 프로세스 집합 내에서 각 프로세스가 다른 프로세스가 가진 어떤 것을 기다리고 있는 상황
	•	모두가 기다리고 있으므로, 아무도 기다리는 자원을 제공할 수 없음
•	세마포어를 사용한 교착 상태 예시
![[Pasted image 20250508173346.png|300]]
## 교착 상태의 특성
•	네 가지 조건이 동시에 성립될 때 교착 상태가 발생할 수 있음:
	•	상호 배제 (Mutual exclusion)
		•	한 번에 하나의 프로세스만 자원을 사용할 수 있음
	•	비선점 (No preemption)
		•	한 번 할당된 자원은 강제로 빼앗을 수 없음
	•	보유와 대기 (Hold and wait)
		•	하나 이상의 자원을 보유한 프로세스가 다른 자원을 요청하며 대기 중
	•	순환 대기 (Circular wait)
		•	자원을 가진 프로세스들이 서로가 가진 자원을 기다리는 원형의 대기 관계 존재
## Deadlock: Resource-Allocation Graph
![[Pasted image 20250508173439.png|150]]
![[Pasted image 20250508173742.png|300]]
순환고리가 만들어졌다고 무조건 데드락이 걸리는 것은 아님
## Deadlock Handling
•	교착 상태 해결책은 두 가지 일반적인 범주로 나뉨:
	•	교착 상태 예방/회피
		•	시스템을 구성할 때 교착 상태가 절대 발생하지 않도록 설계
		•	자원 효율성이 낮아질 수 있음
	•	교착 상태 탐지 및 복구
		•	시스템이 교착 상태인지 판단하고, 심각한 조치를 취함
		•	하나 이상의 프로세스를 종료하여 자원을 회수해야 할 수 있음
## 교착 상태 예방
•	네 가지 조건 중 하나를 피하는 방식:
	•	*No mutual exclusion*
		•	공유 자원에 대한 배타적 접근을 허용하지 않음
		•	많은 애플리케이션에서 비현실적
	•	*Preemption*
		•	자원을 보유한 프로세스가 새로운 자원을 요청했을 때 즉시 할당할 수 없다면, 기존 자원 모두를 반납시킴
		•	반납된 자원은 대기 목록에 추가됨
		•	해당 프로세스는 모든 자원을 다시 얻을 수 있을 때까지 재시작되지 않음
	•	*No hold and wait*
		•	프로세스가 자원을 요청할 때, 다른 자원을 보유하고 있지 않아야 함을 보장해야 함
			•	예) 프로세스가 필요한 모든 자원을 한 번에 요청하게 만듦
		•	필요한 자원을 전부 다 얻거나, 아니면 전부 다 얻을 때까지 대기
		•	프로세스 입장에서는 불편함
			•	필요한 자원을 미리 예측하기 어려워, 자원을 매우 비효율적으로 사용할 수 있음
			•	낮은 자원 활용률 또는 기아 상태가 발생할 수 있음
	•	*No circular wait*
		•	자원 요청에 순서를 부여함
			•	예: 먼저 S 자원들, 그 다음 T 자원들을 요청
		•	모든 프로세스가 같은 순서를 따르도록 강제함

⸻

교착 상태 회피
	•	시스템은 사전에 몇 가지 정보를 가지고 있어야 함
	•	가장 단순하고 유용한 모델은 각 프로세스가 자원 유형별 최대 요구량을 선언해야 함
	•	교착 상태 회피 알고리즘은 자원 할당 상태를 동적으로 검사하여 순환 대기가 발생하지 않도록 보장
	•	자원 할당 상태란 사용 가능한 자원 수, 현재 할당된 자원, 프로세스의 최대 요구량을 의미함

⸻

은행가 알고리즘 (1)
	•	용어 정의
	•	P = {P1, P2, …, Pn} : 시스템 내 모든 프로세스 집합
	•	R = {R1, R2, …, Rm} : 시스템 내 모든 자원 유형 집합
	•	안전 상태: 어떤 순서로든 각 프로세스에 최대 자원을 할당해도 교착 상태가 발생하지 않는 상태
	•	안전 상태에서는 반드시 안전 순서 <P1, P2, …, Pn> 가 존재
	•	Pi가 요청할 수 있는 자원은 현재 사용 가능한 자원 + Pi보다 앞선 모든 프로세스가 반환할 자원으로 충족 가능해야 함
	•	Pi의 자원 요구가 즉시 충족되지 않으면, Pi는 앞선 Pj들이 종료될 때까지 기다림
	•	Pj가 종료되면, Pi는 필요한 자원을 얻고 실행 후 자원을 반환하고 종료
	•	Pi가 종료되면 다음 Pi+1이 자원을 얻어 실행함
	•	비안전 상태: 교착 상태로 이어질 수 있음
	•	시스템이 비안전 상태에 진입하지 않도록 보장해야 함
	•	각 프로세스는 사전에 최대 자원 요구량을 선언해야 함
	•	자원을 요청할 때 기다릴 수 있음
	•	자원을 모두 할당받은 후에는 유한 시간 내에 반환해야 함
	•	기호 표기
	•	n = 프로세스 수, m = 자원 유형 수
	•	Available[1:m]: 각 자원 유형별 사용 가능한 수
	•	Max[1:n, 1:m]: 각 프로세스의 자원 최대 요구량
	•	Allocation[1:n, 1:m]: 각 프로세스에 현재 할당된 자원 수
	•	Need[1:n, 1:m]: 각 프로세스의 남은 자원 요구량
	•	관계: Max[i, j] = Allocation[i, j] + Need[i, j]
	•	알고리즘
	•	안전성 알고리즘
	•	자원 요청 알고리즘

⸻

필요하다면 각 알고리즘의 단계별 절차도 정리해줄 수 있어.