# Lock을 사용한다.
![[Pasted image 20250103232831.png|250]]
![[spinlock]]

![[Mutex]]

![[전공 CS/운영체제/semaphore]]
## Mutex vs Semaphore
- 뮤텍스는 락을 가진 자만 락을 해제할 수 있지만 세마포는 그렇지 않다.
	- 세마포어: wait를 하는 존재와 signal을 하는 존재가 다를 수 있다.
	- 뮤텍스: 락을 가진 자만 unlock을 할 수 있다.
- 뮤텍스는 priority inheritance 속성을 가진다
	- 세마포어: 가지지 않는다.
	- 뮤텍스: lock을 가진 스레드만이 lock을 해제할 수 있기 때문에 lock을 쥐고 있는 스레드의 우선순위를 높일 수 있어 priority inheritance가 가능해진다.
### priority inheritance
여러 스레드가 실행할 때 우선순위가 높은 스레드를 먼저 실행시키는 것을 스케쥴링이라고 한다.
![[Pasted image 20250104004643.png|250]]
현 상황에서 P1는 우선 순위가 높고, P2는 우선 순위가 낮은데, P2가 먼저 락을 쥐고 P1이 이를 기다리기 때문에 P1은 우선 순위가 높음에도 불구하고 P2에게 의존성이 생겨서 늦게 실행될 수 밖에 없게 된다.
이 때, P2의 우선 순위를 P1만큼 올려서 P2도 자주 실행하게 하고, 이로 인해 P1이 빠르게 실행될 수 있도록 스케쥴링을 조절할 수 있다.
## 따라서,
상호 배제만 필요하다면 뮤텍스를 작업 간의 실행 순서 동기화가 필요하다면 세마포를 사용하는 것이 좋다.