###### ALU Control 확인하는 방법
opcode, fuct field를 보고 ALU control이 값을 만든다.
하지만, 모두 보면 수행시간이 오래 걸린다.
lw, sw, beq는 opcode만 확인하면 됨
opcode를 보면 R-type인 것을 알 수 있고 funct를 보고 2차 decode를 해서 ALU control을 결정한다.
###### R, lw, sw, beq rs, rt, rd 어떻게 되는지
R rd rs rt
lw rt N(rs)
sw rt N(rs)
beq rs rt N
그래서 rs-> always read
rt -> load 빼고 read
###### Jump 구현 방법
target PC = Top 4 bits of old PC +26-bit jump address + 00
PC+4의 위 4개 bit
가져온 값을 위로 두 칸 올려서 00을 맨 뒤로 만듬 (4를 더해줘야 하므로)
###### MIPS 파이프라인 5단계
•	**IF**: 메모리에서 명령어 가져오기
•	**ID**: 명령어 디코딩 및 레지스터 읽기
•	**EX**: 연산 수행 또는 주소 계산 (ALU)
•	**MEM**: 메모리 피연산자 접근
•	**WB**: 결과를 레지스터에 저장
###### pipeline과 throughput, latency
throughput 증가하지만, 각 명령어의 실행시간인 latency는 감소하지 않는다.
###### 모든 단계가 똑같을 때 pipeline의 성능향상률
![[Pasted image 20250501152016.png|200]]
###### MIPS ISA가 파이프라이닝에 유리한 설계인 이유
•	모든 명령어는 32비트
	•	한 사이클 내에서 가져오고 디코딩하기 쉬움
•	명령어 형식이 적고 규칙적임
	•	decode와 레지스터 읽기를 한 번에 수행 가능
•	Load/Store 주소 지정 방식
	•	3단계에서 주소 계산, 4단계에서 메모리 접근
•	메모리 피연산자의 정렬 보장
	•	메모리 접근이 한 사이클이면 충분함
###### Hazard 3가지
•	Structural Hazard
	•	필요한 자원이 사용 중일 때
•	data Hazard
	•	이전 명령어의 데이터 읽기/쓰기가 끝날 때까지 기다려야 함
•	Control Hazard
	•	제어 흐름 결정이 이전 명령어에 의존할 때
###### MIPS 파이프라인에서 메모리가 하나일 경우
Structural Hazard 발생
•	Load/Store 명령은 데이터 접근 필요
•	명령어 가져오기(fetch)는 해당 사이클 동안 **stall**해야 함
	•	결과적으로 파이프라인에 “**bubble**” 발생
•	따라서 파이프라인 데이터 경로에는
	•	명령어/데이터 메모리를 분리하거나
	•	명령어/데이터 캐시를 별도로 구성해야 함
###### add 과정에 MEM이 포함되어 있는 이유
사용하지는 않더라도, 모든 stage를 균등하게 하기 위해 포함함 (그렇게 안하면 structure hazard 발생 가능성이 있기 때문)
###### stall을 피하기 위한 코드 스케쥴링 방법 (Forwarding으로 해결되지 않는 stall)
Load 명령의 결과를 바로 다음 명령에서 사용하지 않도록 코드 재배치
###### Control Hazard

###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
###### Q
A
