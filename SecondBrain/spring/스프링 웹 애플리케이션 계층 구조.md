# 간단한 그림
![[Pasted image 20230625130355.png]]
계층 설계는 서버를 잘 설계 하기 위한 디자인 패턴 중의 하나로 상위 계층에서 하위 계층으로의 의존만 존재하는 형태로 구성되어 있다
(e.g. Controller는 Service를 의존하고, Service는 Repository를 의존하는 형태이다.)
# Controller
* 클라이어트의 요청을 처리하고 응답을 반환하는 역할을 담당
* 클라이어트로부터 받은 요청을 해석하고, 해당 요청에 대한 비즈니스 로직 처리를 서비스 계층에 위임한다.
* **요청에 따라 적절한 서비스 메소드를 호출**하여 비즈니스 로직을 수행하고, 처리결과를 클라이언트에게 반환한다.
* 주로 사용자 인터페이스와의 상호작용을 담당한다.
* **요청 URL에 대한 매핑**과 **요청 처리**를 담당하는 메서드를 포함한다.

# Service
* **비즈니스 로직을 처리**하는 역할을 담당한다.
* 컨트롤러부터 받은 요청에 대한 실질적인 비즈니스 로직을 구현하고, 데이터 처리를 위해 리포지토리의 인터페이스와 상호작용한다.
* 서비스 계층은 여러개의 도메인 객체를 조합하여 비즈니스 요구사항을 구현하고, 필요한 기능을 제공한다.
* Django의 view와 비슷한 역할을 수행한다.
> 비즈니스로직 이란? #비즈니스로직 
> 어플리케이션에서 특정한 요구사항을 충족시키기 위해 필요한 데이터 처리, 조작, 검증, 계산 등을 포함하는 코드.

서비스는 비즈니스에 의존적으로 설계
리포지토리는 기계적으로 개발스럽게 용어를 선택함 (넣고 빼고 찾고)
예를 들어 멤버를 찾는 함수에서
서비스에서는 그 함수의 이름을 findMembers라고 짓는다면,
리포지토리에서는 그 함수의 이름을 findAll로 짓는다.
# Repository
* 데이터의 영속성을 관리하고, 데이터베이스나 외부저장소와의 상호작용을 담당한다.
* **데이터의 생성,조회,수정,삭제(CRUD)와 같은 데이터 액세스 기능을 제공**한다.
* **일반적으로 ORM(Object-Relational Mapping : 관계형 데이터베이스)를 사용**하여 데이터베이스와의 상호작용을 처리한다.
* 리포지토리는 도메인 객체를 데이터베이스와 연결하여 데이터의 저장 및 조회를 처리하는 인터페이스를 제공한다.
* 인터페이스와 클래스를 따로 관리하여 인터페이스에서는 함수의 순서를 관리하여 서비스 계층과 소통하고 , 클래스에서는 리포지토리 액세스 기능함수 구현을 제작하는 것 같다.


> 데이터의 영속성이란? #데이터의영속성
> 데이터가 생성되어서 유지되고 보존되는 특성을 뜻한다. 데이터가 메모리나 임시 저장소에서 지속적으로 저장되어 지속성을 유지하고, 시스템이 종료되더라도 데이터가 손실되지 않음을 보장한다.
> 일반적으로 데이터베이스 또는 외부 저장소를 활용하여 구현된다.
# Domain
* **애플리케이션의 핵심 개념을 나타내는 "객체"들로 구성**된다.
* 비즈니스 도메인에 대한 규칙과 데이터를 캡슐화하고, 비즈니스 로직을 포함한다. 
* 도메인 객체는 데이터베이스와의 매핑을 위한 애노테이션 또는 XML 설정과 같은 데이터 액세스 기술과는 독립적으로 설계됩니다. => 도메인 객체는 데이터베이스와의 연동을 위한 기술적인 세부사항으로부터 분리되어 독립적으로 설계된다.
* **Django의 모델과 유사한 역할**을 한다.
* 단 장고에서는 model에서 함수를 정의하지 않았지만, Spring에서는 모델에 관련한 get,set 함수 같은 경우는 Domain에서 적용하는 듯 하다.


# 정리
장고에 비유해서 설명하자면, Controller는 urls.py와 비슷하며, Service는 view와, repository는 model과 비슷한 역할을 한다.
이러한 각각의 계층 구조는 어플리케이션의 유연성, 재사용성, 테스트 용이성을 향상시키기 위해 사용된다. 각 계층은 독립적으로 작동해야 하며 각각의 책임과 역할을 지녀야 한다. 
또한 각 계층은 인터페이스를 통해 서로를 분리하고 의존성을 줄여야 한다. 이를 통해 애플리케이션의 유지보수와 확장성을 향상시킬 수 있다.

[[객체 지향 프로그래밍]]