통합 테스트는 시스템의 각 구성 요소가 올바르게 연동되는지 확인한다. 기능 테스트가 사용자 입장에서 테스트하는데 반해 통합 테스트는 소프트웨어의 코드를 직접 테스트한다. 

일반적인 웹 어플리케이션은 프레임워크, 라이브러리, 데이터베이스, 구현한 코드가 주요 통합 테스트 대상이다.
통합 테스트를 수행하면 스프링 프레임워크나 마이바티스 설정이 올바른지, SQL 쿼리가 맞는지, DB 트랜잭션이 잘 동작하는지 등을 검증할 수 있다.
# 외부 연동이 필요한 테스트 예
### 스프링 부트와 DB 통합 테스트
![[Pasted image 20240510162753.png]]
![[Pasted image 20240510162804.png]]
통합 테스트는 실제로 DB를 사용하고, 동일한 테스트를 여러 번 실행해도 결과가 같게 나와야 하므로 테스트 코드에서 DB 데이터를 알맞게 제어해야 한다. 데이터가 존재하는 상황을 만들기 위해 DB에 데이터를 추가해야 하고 존재하지 않는 상황을 만들기 위해 DB에서 데이터를 삭제해야 한다.

### WireMock을 이용한 REST 클라이언트 테스트
![[Pasted image 20240510163036.png]]

WireMock을 사용하면 서버 API를 스텁으로 대체할 수 있다. WireMock을 사용하여 올바른 응답이나 타임아웃과 같은 상황에 대해 아래와 같이 테스트할 수 있다.
![[Pasted image 20240510163208.png]]
![[Pasted image 20240510163218.png]]
WireMockServer는 HTTP 서버를 흉내낸다.
![[Pasted image 20240510163527.png]]
### 스프링 부트의 내장 서버를 이용한 API 기능 테스트
![[Pasted image 20240510164010.png]]
![[Pasted image 20240510164020.png]]
스프링 부트는 테스트에서 웹 환경을 구동할 수 있는 기능을 제공한다. 이 테스트는 이 기능을 사용해서 내장 서버를 구동하고 스프링 웹 어플리케이션을 실행한다.
TestRestTemplate은 스프링 부트가 테스트 목적으로 제공하는 것으로서 내장 서버에 연결하는 RestTemplate이다.

