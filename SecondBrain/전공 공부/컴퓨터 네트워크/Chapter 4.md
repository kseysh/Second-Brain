# TCP 서버의 기본적인 함수호출 순서
![[Pasted image 20241001142259.png|300]]
## 소켓의 종류
1. 일반 소켓
2. 서버 소켓
	1. 서버 소켓은 `listen`이라는 함수를 통해 SYN이 오면 SYN/ACK을 보내주는 역할을 한다. (일반 소켓은 SYN이 와도 별다른 대처를 하지 않음)

## 연결 요청 대기 상태로의 진입
![[Pasted image 20241001143237.png|400]]
SYN/ACK을 보내면 ACK이 올 때까지 연결 요청 대기 큐라는 곳에서 ACK을 기다린다. (한 순간에 한 명씩만 처리한다.)
## 클라이언트의 연결요청 수락
![[Pasted image 20241001143344.png|400]]
ACK이 오면 `accept`라는 함수에서 연결 요청 대기 큐에서 값을 빼온다.
서버 소켓은 연결 요청을 받아주는 역할만 한다.
이후 서버 소켓은 accept 함수를 통해 client socket을 새로 생성해주고, 그 클라이언트 소켓끼리 서로 통신(write, read)을 한다.
