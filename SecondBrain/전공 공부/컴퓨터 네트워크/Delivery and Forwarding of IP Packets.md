
## Simplified forwarding module in classless address
![[Pasted image 20241120153750.png|500]]

![[Pasted image 20241120153833.png|600]]
![[Pasted image 20241120153839.png|600]]
네트워크 4개 연결, 최소한 4개의 정보는 direct하게 연결되어 저장되어 있고
다른 정보도 가질 수 있음

mask가 가장 큰 것이 맨 위로 온다.
![[Pasted image 20241120153946.png|600]]


다음은 패킷이 목적지 주소 180.70.65.140로 R1에 도착했을 때의 포워딩 과정을 보여줍니다.

**해결 방법:**
라우터는 다음 단계를 수행합니다:
1. 첫 번째 마스크 (/26)를 목적지 주소에 적용합니다. 결과는 180.70.65.128로, 해당 네트워크 주소와 일치하지 않습니다.
2. 두 번째 마스크 (/25)를 목적지 주소에 적용합니다. 결과는 180.70.65.128로, 해당 네트워크 주소와 일치합니다. 다음 홉 주소(이 경우 패킷의 목적지 주소)와 인터페이스 번호 m0가 ARP(8장에서 다룸)로 전달되어 추가 처리를 진행합니다.
![[Pasted image 20241120154005.png]]


패킷이 목적지 주소 201.4.22.35로 R1에 도착했을 때의 포워딩 과정을 보여줍니다.
**해결 방법:**
라우터는 다음 단계를 수행합니다:
1. 첫 번째 마스크 (/26)를 목적지 주소에 적용합니다. 결과는 201.4.22.0으로, 해당 네트워크 주소(1행)와 일치하지 않습니다.
2. 두 번째 마스크 (/25)를 목적지 주소에 적용합니다. 결과는 201.4.22.0으로, 해당 네트워크 주소(2행)와 일치하지 않습니다.
3. 세 번째 마스크 (/24)를 목적지 주소에 적용합니다. 결과는 201.4.22.0으로, 해당 네트워크 주소와 일치합니다.
![[Pasted image 20241120154304.png|600]]



패킷이 목적지 주소 18.24.32.78로 R1에 도착했을 때의 포워딩 과정을 보여줍니다.
**해결 방법:**
이번에는 모든 마스크가 목적지 주소에 적용되지만 일치하는 네트워크 주소를 찾을 수 없습니다. 테이블 끝에 도달하면 모듈은 다음 홉 주소 180.70.65.200과 인터페이스 번호 m2를 ARP(8장에서 다룸)로 전달합니다. 이는 아마도 인터넷의 다른 곳으로 보내야 하는 패킷일 것입니다.
![[Pasted image 20241120154317.png|600]]
다 안되면 default로 보내서 다른 인터넷으로 간다.


이제 다른 유형의 예제를 살펴보겠습니다. 라우팅 테이블만 알고 있을 때 라우터의 구성을 찾을 수 있을까요? 라우터 R1의 라우팅 테이블이 표 6.2에 주어져 있습니다. 그 토폴로지를 그릴 수 있을까요?
**해결 방법:**
몇 가지 사실은 알고 있지만 명확한 토폴로지를 위해 모든 것을 알고 있는 것은 아닙니다. 라우터 R1에는 세 개의 인터페이스: m0, m1, m2가 있다는 것을 알고 있습니다. 라우터 R1에 직접 연결된 세 개의 네트워크가 있다는 것을 알고 있습니다. R1에 간접적으로 연결된 두 개의 네트워크가 있다는 것을 알고 있습니다. 적어도 세 개의 다른 라우터가 관련되어 있어야 합니다(다음 홉 열을 참조). 네트워크 140.6.12.64가 R3에 직접 연결되어 있는지 또는 포인트 투 포인트 네트워크(WAN)와 다른 라우터를 통해 연결되어 있는지 알 수 없습니다. 그림 6.14는 우리가 추측한 토폴로지를 보여줍니다.

![[Pasted image 20241120154317.png|500]]