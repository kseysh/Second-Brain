# mainFunction
• 메인 함수의 프로토타입
```c
int main(int argc, char *argv[]);
```
• 인수
	• argc는 명령줄 인수의 수입니다.
	• argv는 인수에 대한 포인터 배열입니다.
• C 프로그램이 exec 함수 중 하나에 의해 커널에 의해 실행될 때, 메인 함수가 호출되기 전에 특별한 시작 루틴이 호출됩니다.
• 실행 가능한 프로그램 파일은 이 루틴을 프로그램의 시작 주소로 지정합니다.
• 이 시작 루틴은 커널로부터 값을 받아옵니다:
	• 명령줄 인수
	• 환경 그리고 설정합니다.

명령줄 인수
• 프로그램이 실행될 때, exec을 수행하는 프로세스는 새로운 프로그램에 명령줄 인수를 전달할 수 있습니다.

환경 리스트
• 환경 리스트는 문자 포인터의 배열입니다.
• 포인터 배열의 주소는 전역 변수 `environ`에 포함되어 있습니다:

• 특정 환경 변수를 접근하기 위해서는 보통 environ 변수를 통해서가 아닌 getenv와 putenv 함수를 통해서 합니다.
• 대부분의 UNIX 시스템은 메인 함수에 세 번째 인수를 제공합니다.

  

# 메모리 레이아웃 C 프로그램

• C 프로그램은 다음으로 구성됩니다:
	• 텍스트(코드) 세그먼트:
	• 실행할 프로그램 명령어(기계 명령어)
	• 초기화된 데이터 세그먼트:
	• 초기화된 전역 및 정적 변수
```c
int maxcount = 99;
```
	• 초기화되지 않은 데이터 세그먼트(bss):
	• 초기화되지 않은 전역 및 정적 변수
	• 이 세그먼트의 데이터는 프로그램이 실행되기 전에 커널에 의해 0 또는 null 포인터로 초기화됩니다.
```c
long sum[1000];
```
• 스택:
	• 함수에 로컬인 변수를 저장합니다.
	• 함수가 호출되면, 그 함수의 자동 변수들이 스택의 맨 위에 할당됩니다.
	• 함수가 종료되면 그 변수들은 할당 해제됩니다.

• 힙:
	• 동적 메모리는 힙에서 할당됩니다.

• 초기화되지 않은 데이터 세그먼트의 내용은 디스크에 있는 프로그램 파일에 저장되지 않습니다.

• 프로그램 파일에 저장되어야 하는 프로그램의 유일한 부분은 텍스트 세그먼트와 초기화된 데이터입니다.

  

프로세스(1/2)

• 단순히 실행 중인 프로그램의 인스턴스입니다.

• 프로세스는 프로그램의 실행에 해당합니다.

• 프로그램 ≠ 프로세스

• 프로세스는 다음을 포함합니다:

  

• 프로그램 코드

• 프로그램 변수 내의 데이터 값

• 하드웨어 레지스터

• 프로그램 스택

• 프로세스는 프로세스 ID(pid)에 의해 식별됩니다.

• 셸은 새로운 프로세스를 생성합니다.

  

프로세스 환경

  

• 모든 UNIX 프로세스는 다른 프로세스를 시작할 수 있습니다.

• 이는 파일 시스템의 디렉토리 트리와 평행한 계층 구조로 UNIX 프로세스 환경을 형성합니다.

• 프로세스 트리의 최상위에는 init이라는 매우 중요한 프로그램의 실행인 단일 제어 프로세스가 있으며, 이는 모든 시스템 및 사용자 프로세스의 궁극적인 조상입니다.

• UNIX는 프로세스 생성 및 조작을 위한 몇 가지 시스템 호출을 제공합니다:

• fork, exec, wait, exit 등

  

getpid(2)와 getppid(2) 시스템 호출

프로세스 ID

  

• 모든 프로세스는 고유한 프로세스 ID, 즉 0 이상의 정수를 가집니다.

• 고유하지만, 프로세스 ID는 재사용됩니다.