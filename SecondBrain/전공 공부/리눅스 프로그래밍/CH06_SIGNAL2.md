## `sigprocmask(2)` 시스템 호출 (1/2)
```c
int sigprocmask(int how, const sigset_t *restrict set, sigset_t *restrict oset);
```
- 프로세스의 신호 마스크는 해당 프로세스에 전달이 차단될 신호들의 집합입니다.
- `set`이 널 포인터인 경우, 프로세스의 신호 마스크는 변경되지 않으며, `how` 인자는 무시됩니다.
###### `how`
- **SIG_BLOCK**: 차단할 신호 집합에 특정 신호를 추가합니다.
- **SIG_UNBLOCK**: 차단할 신호 집합에서 특정 신호를 제거합니다.
- **SIG_SETMASK**: 지정된 신호 집합으로 차단할 신호를 설정합니다. (기존 것에 추가/삭제가 아닌 아예 새로 지정)
![[Pasted image 20241126001548.png|500]]
# 신호 보내기
## `kill(2)`와 `raise(2)` 시스템 호출 (1/2)
```c
int kill(pid_t pid, int signo);
int raise(int signo);
```
- `kill` 함수는 프로세스나 프로세스 그룹에 신호를 보냅니다.
- `raise` 함수는 프로세스가 자신에게 신호를 보낼 수 있도록 합니다.
###### `pid` 값에 따른 동작
- `pid > 0`: 프로세스 ID가 `pid`인 프로세스에 신호가 전송됩니다. (특정 pid 전송)
- `pid == 0`: 신호가 송신자의 프로세스 그룹 ID와 같은 프로세스 그룹 ID를 가진 모든 프로세스에 전송됩니다. (송신자의 그룹에 다 전송)
- `pid < -1`: 절대값이 `pid`인 프로세스 그룹 ID를 가진 모든 프로세스에 신호가 전송됩니다. (그룹에 전송)
- `pid == -1`: 송신자가 신호를 보낼 권한이 있는 시스템의 모든 프로세스에 신호가 전송됩니다. (다 전송)
## 신호를 보낼 권한
- **슈퍼 유저**는 모든 프로세스에 신호를 보낼 수 있습니다.
- **송신자의 실제 또는 유효 사용자 ID**가 수신자의 실제 또는 유효 사용자 ID와 같아야 합니다.

## 널 신호(Null Signal)
- POSIX.1은 신호 번호 0을 널 신호로 정의합니다.
  - `signo` 인자가 0일 때, 특정 프로세스가 여전히 존재하는지 확인하는 데 자주 사용됩니다.
  - 프로세스가 존재하지 않으면, `kill`은 -1을 반환하고 `errno`는 `ESRCH`로 설정됩니다.
- 프로세스 존재 여부 테스트는 원자적이지 않으므로 `kill`이 호출자에게 응답을 반환할 때쯤 해당 프로세스가 이미 종료되었을 가능성이 있습니다. 따라서 이 정보의 유효성은 제한적입니다.

## `alarm(2)` 시스템 호출 (1/2)
- `alarm()`은 지정된 시간이 지나면 타이머가 만료되도록 설정합니다.
  - 타이머가 만료되면 `SIGALRM` 신호가 생성됩니다.
  - 기본적으로 이 신호의 동작은 프로세스를 종료하는 것입니다.
- 프로세스당 하나의 알람 클럭만 설정할 수 있습니다.
- `alarm` 호출 시 이전에 등록된 알람 클럭이 만료되지 않은 경우:
  - 해당 알람 클럭에 남은 시간이 반환됩니다.
  - 이전 알람 클럭이 새로운 값으로 대체됩니다.
- `alarm(0)` 호출 시 만료되지 않은 이전 알람이 취소되며:
  - 해당 알람 클럭에 남은 시간이 반환됩니다.
- **`SIGALRM`을 잡으려는 경우**:
  - `alarm`을 호출하기 전에 신호 처리기를 설정해야 합니다.
  - 신호 처리기를 설정하기 전에 `alarm`을 호출하면 `SIGALRM`에 의해 프로세스가 종료될 수 있습니다.

## `pause(2)` 시스템 호출
- **`pause` 함수**는 신호가 잡힐 때까지 호출한 프로세스를 일시 중단합니다.
  - 동작이 프로세스를 종료하는 경우, `pause()`는 반환하지 않습니다.
  - 동작이 신호를 잡는 함수를 실행하는 경우, 신호 잡기 함수가 반환된 후 `pause()`도 반환됩니다.

## 추가 기능
- 일부 시스템에서는 배열을 제공합니다.
- **이 기능은 `perror`와 유사**하며, **`strerror`와 유사**합니다.