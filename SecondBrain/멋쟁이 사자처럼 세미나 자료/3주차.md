# 세션 전 과제 - 장고 설치하기

# 3-1. Django란?

<aside> 💡 장고는 웹 프로그램을 쉽고 빠르게 만들 수 있도록 도와주는 웹 프레임워크이다

</aside>

어..? 그렇다면 웹 프레임워크가 뭘까요?

웹 프로그램을 만들기 위해서는 정말 여러 기능들을 만들어야 합니다.

로그인, 로그아웃, 권한처리, 데이터베이스 처리…. 등등 여러가지 개발할 것들이 많은데 웹 프레임 워크를 사용하면 이런 기능들을 일일이 만들 필요가 없습니다. 웹 프레임워크에는 그런 기능들이 이미 만들어져 있기 때문이죠! 그저 웹 프레임워크에 있는 기능을 익혀서 사용하기만 하면 됩니다. **쉽게 말해 웹 프레임워크는 웹 프로그램을 만들기 위한 스타터 키트라고 생각하면 됩니다.**

그리고 파이썬으로 만들어진 웹 프레임워크 중 하나가 바로 **`장고`**입니다.

## 3-1-1. Django를 배우는 것이 백엔드 개발자로서 도움이 될까요…? 😢

제가 멋쟁이사자처럼에 들어오면서 가장 크게 걱정했던건 Django를 배우는게 백엔드 개발자로서 과연 도움이 될까…? 였습니다.

우선 구글에서 특정 프로그래밍 언어 튜토리얼이 검색되는 빈도를 기준으로 순위를 매기는 PYPL(Popularity of Programming Language) 지수에 대해서 보여드리겠습니다.

2023년 2월 PYPL 지수 TOP 10은 다음과 같습니다

![group-1410114581.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/ed8a960d-0376-4332-9c76-466d5455d46d/group-1410114581.png)

와… 파이썬이 정말 높죠…? 하지만…!

현재 한국 기업들은 어떤 기술 스택을 보유한 개발자를 가장 많이 원할까요?

![group-1410114604.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/9c15a1e7-ab5b-43c7-9de7-4a2142506c1e/group-1410114604.png)

아쉽게도 전세계적으로는 python을 많이 사용하는 것은 맞지만 한국 기업에서는 Java를 사용하는 개발자를 주로 원합니다. 보통 Java를 사용해서 Spring이라는 프레임워크를 사용하는 백엔드 개발자가 정말 많아요 (현재 저도 Spring을 이용해 공부를 하고 있답니다!)

- 우리나라 기업이 특히 Java를 선호하는 이유는요…!
규모 있는 서비스 개발에 적합하고 Spring 프레임워크나 여러 라이브러리들이 오랜 시간 동안 많은 사용자들에게 다뤄진 만큼 충분히 검증되어 안정성도 높습니다. 대기업이나 공공, 금융 등 SI 프로젝트에서 Java를 가장 많이 사용합니다.

또한 앞서 말한 것과 같이 Java는 안정성과 보안성이 뛰어나기 때문에, 대규모 웹 애플리케이션을 만들 때 많이 사용됩니다. 다른 언어에 비해 높은 처리 속도와 성능이 특징이기 때문에, 데이터 처리나 복잡한 계산이 필요한 작업에 유리합니다.

또한 전자정부프레임워크라는 것이 자바 스프링 기반으로 만들어져 직간접적으로 공공기관과 관련된 일을 해야하는 회사들이 자바를 이용할 수밖에 없었습니다. 이러한 이유때문에 우리나라가 특히 Java를 선호하는 것 같아요!
## 그러면 저는 왜 Django를 배워야하죠…?

멋쟁이사자처럼에서 장고를 처음 배우고, 스프링 개발로 넘어갔던 제가 생각하기에 스프링 말고 장고를 먼저 배워야하는 이유는요....

- 백엔드의 기초를 잡을 수 있다.
- 백엔드 개발의 흥미를 느끼게 해줄 수 있다.

저는 다시 개발을 시작하는 기회가 주어진다고 해도 멋쟁이사자처럼에서 Django를 배운 이후에 Spring으로 넘어가는 방법을 택할 것 같아요. Django를 통해 쉽게 백엔드 개발을 했던 기억 덕분에 현재 열심히 Spring을 공부할 수 있는 계기가 되고 있기 때문입니다!

그리고 한국 기업에서도 간단한 프로젝트 같은 경우에는 Django를 사용하는 기업도 많습니다! 단지 Spring이 많은 것일 뿐이에요 Django가 손에 잘 맞는 프레임워크이다 싶으면 Django 개발자라는 틈새시장을 노려보는 것도 좋을 것이라고 생각합니다 :)

- Django를 사용하는 기업들
**Instagram**, **National Geographic**, **Mozilla**, **Spotify**, **Pinterest**, **Disqus**, **Bitbucket** 및 **Eventbrite**와 같은 많은 유명 회사에서 Django를 쓰고 있습니다!

[커리어 성장을 위한 모든 정보, 더팀스](https://www.theteams.kr/stack/company_view/Django)
## Django의 장단점

<aside> 💡 마감일이 있는 완벽주의자를 위한 웹 프레임워크

</aside>

장고의 홈페이지에 처음 들어가면 있는 장고에서 장고를 소개하는 말입니다!

장고는 쉽고, 빠르다라는 말로 장점을 설명드릴 수 있을 것 같아요

⇒ 파이썬을 이용해 쉬운 문법을 사용하며, 파이썬의 많은 라이브러리 제공으로 인해 빠른 개발을 할 수 있다는 뜻입니다! (서버의 속도가 빠르다는 뜻은 아닙니다)

**장점**

- python 기반 웹 프레임워크로, 사용하기 좋은 라이브러리들이 많다. (생산성이 높다)
- 반복적으로 구현해야하는 부분들이 많이 만들어져 있어 사용할 수 있다. (로그인, 보안 등…)
- Full Stack Framework로 front, backend 등 서버가 필요로 하는 것을 모두 Django로 구현할 수 있다. (Django의 MVT 패턴을 이용한다면 가능하지만 멋사과정에서는 프론트엔드 개발자와 통신하는 방법을 배웁니다!)
- 웹 개발 입문자의 진입 장벽을 낮춰준다. (웹서버와 데이터베이스를 따로 구축하지 않아도 되도록 합니다!)
- 관리자 페이지를 기본적으로 제공한다. (정말 유용한 기능입니다!)

**단점**

- 파이썬이 인터프리터 언어이기 때문에 생기는 문제점(속도가 느리고 컴파일 에러를 잡지 못함)
- 한국에서 많이 사용되지 않아 스프링에 비해 한글 자료를 찾기 어렵다(따라서 영어로 검색할 수 있다면 더 좋은 레퍼런스들을 찾을 수 있을거에요!)
- 이미 만들어진 기능을 사용하는 경우가 많아 원하는 대로 커스텀을 하기 어렵다. 이미 라이브러리를 사용하는 상황에서 수정하려면 라이브러리를 해석해야 하기 때문! (하지만 라이브러리가 없다면 이해하고 적용해야 하기 때문에 오히려 장점으로 볼 수도 있습니다!)

## Django 어떻게 돌아가요?

![rLfSC.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/459b58de-dc1e-4f48-a9d8-2e769a4fc279/rLfSC.jpg)

장고는 이렇게 돌아갑니다…. 너무 어려우니 하나씩 살펴볼까요! (django 사이클 하나씩 설명)

이것은 장고의 기본적인 패턴인 MVT 패턴이라고 합니다! MVT 패턴을 이용하면 말로만 듣던 프론트엔드와 백엔드를 혼자 개발할 수 있는 풀스택 개발자가 될 수 있습니다!

<aside> 💡 키워드 과제 Django의 MVT 패턴이란?

</aside>

하지만 우리는 일단 백엔드 파트에 들어왔으니 백엔드 파트에 집중하기 위해서 이후에 배울 `restful api`를 통해 프론트엔드와 통신하는 과정을 거치게 될 것입니다!

저희는 여기에서 [urls.py](http://urls.py) views.py을 이용해서 웹 페이지에 화면을 띄워보는 작업을 해보도록 하겠습니다!

## Django Project 시작하기

![2-01_6.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/0a7b989c-e69b-4d3d-a5e4-8f4fbb858c33/2-01_6.png)

저희가 사용할 Django 프로젝트의 흐름입니다!

### **`localhost:8000`란?**
`**localhost**`

host : 네트워크를 이용하기 위해 네트워크에 연결된 장치 (스마트폰이 될 수도 있고 컴퓨터가 될 수도 있다.)

local + host = localhost : 네트워크 상에서 자신의 컴퓨터의 주소를 뜻하며 컴퓨터의 네트워크 기능을 시험하기 위해 가상으로 인터넷망에 연결되어 있는 것처럼 할당하는 인터넷 주소입니다

저희가 프로젝트를 웹 사이트에 올려서 확인해보고 싶다면 `배포` 라는 과정을 거쳐야 하는데요 지금 배포를 아직 학습하지 않아 가상으로 배포했다 생각하고 인터넷망에 연결되어 있는 것처럼 주소를 할당한 것이라고 생각하시면 됩니다!

localhost는 IPv4에서 127.0.0.1로 쓰입니다 따라서 http://localhost:8000과 http://127.0.0.1:8000은 같은 의미로 사용됩니다!

127.0.0.1가 주소라면…

localhost는 지도에 우리 집이라고 설정해놓은 느낌,,,?입니다

`**:8000`**

그러면 `:8000` 은 무엇을 뜻하냐구요?

이는 포트라는 개념을 의미합니다.

이 포트의 개념을 일상생활에서 쉽게 접할 수 있는 예시는 은행 창구의 개념을 생각하면 쉽습니다.

우리가 은행을 가서 보면 예금 창구, 대출 창구, 외환 창구 등 이용자에게 제공할 서비스에 따라 전담 창구가 구분되어 있습니다.

본론으로 돌아와

컴퓨터 역시 어떠한 서비스를 주거나/받게 되는데 이것을 보다 효율적으로 관리하기 위해 포트라는 개념을 사용합니다.

알아두면 좋은 포트 번호들

`Django 서버 - 8000`

`http - 80`

`https - 443`

`ssh - 22`

`mysql - 3306`

(외울 필요는 없고 한 번 봐두시기만 해도 나중에 아 이게 이거였구나~ 하실거에요!)

아… 근데 저는 url을 작성하면서 포트번호를 작성한적이 없는데요? 정작 www.naver.com만 해도 그런 포트 번호가 없잖아요..! 라고 하신다면.. 나중에 배포 세션에서 배울 nginx 포트 포워딩에 대해서 미리 알아둬도 좋을 것 같습니다 ^0^
### Health Check API 만들기

---

그러면 한 번 Health Check API를 만들어 볼까요?(rest 첫 과제에 healthcheck 공통 응답으로 반환하기 과제 내기..)

`Health Check API`란?

application을 운영하다 보면 우리가 예상할 수 없는 상황이 발생하곤 합니다. 개발자의 잘못인 경우도 있고, 시스템의 불안정함 때문일수도 있습니다. 그러나 중요한 점은 어떠한 상황에서도 서비스는 정상적으로 운영되어야 하며, 문제가 발생할 경우 빠르게 파악하고 처리해야 한다는 점입니다.

**Health check**

많은 서비스에서 health check라는 api를 작성하여 이것을 app 실행 전.중.후에 파악하는 용도로 사용합니다. health check api는 특별한 것이 아니고 현재 app 상태가 정상인지 확인하면 됩니다.

util 앱 생성

<aside> 💡 키워드 과제 Django 앱은 무엇이고 어떤 기준으로 나누는 것이 좋을까?

</aside>

### Windows

```
django-admin startapp util
```

### macOS

```
python3 -m django startapp util
```

settings.py에 util app 추가하기

```jsx
INSTALLED_APPS = [
    # my app
    'util',
    # Basic App
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]
```

- 장고에서 굳이 settings.py에 추가하도록 설계한 이유가 뭔가요…?

저희는 이제 `http://localhost:8000/health` 라는 url을 입력하게 되면 “seminar server ok!”라는 문구가 웹 사이트에 출력되도록 만들겁니다!

그러면 아무것도 하지 않은 상태인 지금 한 번 이 url로 들어가게 되면 어떻게 될까요?

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/a4b0ccb8-f92f-4ae1-99b6-89c6cd9f0aa9/Untitled.png)

위와 같은 응답이 오게 됩니다!

여기서 404는 http status code라는 것인데요! 아래 자료에 의하면 특정 HTTP 요청이 성공적으로 완료되었는지 알려주는 코드라고 되어있는데요

404 상태코드는 요청받은 리소스를 찾을 수 없거나, 브라우저에서는 알려지지 않은 URL을 의미합니다.

저희는 아직 /health에 맞는 url 패턴을 작성하지 않아 웹에서 404 상태코드를 보여주는 것입니다!

그렇다면 /health에 맞는 url 패턴을 작성해봅시다!

[HTTP 상태 코드 - HTTP | MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Status)

<aside> 💡 키워드 과제 위 자료를 참고하여 2xx, 3xx, 4xx, 5xx 번대 응답이 어떤 종류인지 간단하게 알아두기 자주 사용하는 상태코드인 200, 201, 204, 301, 400, 401, 403, 404, 405, 500, 502에 대해서 정리하기

</aside>

![2-01_6.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/0a7b989c-e69b-4d3d-a5e4-8f4fbb858c33/2-01_6.png)

다시 가져왔습니다! 이 설명 사진을 다시 보면 웹 사이트에서 url을 입력하게 되면 urls.py가 먼저 이 값을 받게 되는데요! 우리도 이에 맞게 /health로 끝나는 url을 매핑해주기 위해서 urls.py를 먼저 작성해보겠습니다.

seminar_project/urls.py

```python
from django.contrib import admin
from django.urls import path

from util import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('health/', views.health),
]
```

util/views.py

```python
from django.shortcuts import render

from django.http import HttpResponse

def health(request):
    return HttpResponse("seminar server ok!")
```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9937aac6-6b2b-4cd1-b444-430eacb0d563/def61692-cb1a-4bbc-a4f5-a039d1800ddc/Untitled.png)

완성했다면 우리 서버가 건강한지 체크할 수 있는 health check api를 개발하신겁니다! 축하합니다! 🎉🎉

### 리팩토링

seminar_project/urls.py

```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('health/', include('util.urls')), 
]
```

util/urls.py

```python
from django.contrib import admin
from django.urls import path

from . import views

urlpatterns = [
    path('', views.health),
]
```

- url 분리를 한 이유
파이썬은 객체 지향 언어이기 때문에 한 앱의 코드가 변경 되었을 때 다른 앱의 코드가 변경되는 것을 최소화할 수 있어야 합니다. 하지만 저희가 처음 개발했던 `seminar_project/urls.py`는 `util`에서 url을 추가하게 될 때마다 `seminar_project/urls.py`파일도 지속적으로 수정해주어야 한다는 문제점이 있습니다. `seminar_project의 urls.py` 파일은 앱이 아닌 프로젝트 성격의 파일이므로 이곳에는 프로젝트 성격의 URL 매핑만 추가되어야 해서 util 앱에서만 사용하는 URL 매핑을 `seminar_project/urls.py` 파일에 계속 추가하는 것은 좋은 방법이 아닙니다.

| --- | --- | --- | --- | --- |

url 매핑은 다음과 같이 더해져 결국 프론트엔드 개발자가 사용하는 url 엔드포인트는 최종 url을 사용하게 됩니다!
util/views.py

```python
from django.shortcuts import render

from django.http import HttpResponse

def health(request):
    return HttpResponse(status = 200, content = "seminar server ok!")
```

status 필드를 넣어주어 status를 명시적으로 확인할 수 있도록 변경해줍니다

HttpResponse의 기본 status값은 200이긴 하지만, 나중에 다른 http status를 반환해주어야 할 때 일관성을 보장해주고, 다른 개발자에게 명시적으로 status code를 전달해줄 수 있다는 점에서 이렇게 리팩토링을 진행해보았습니다!

<aside> 🎉 오늘 준비한 세션은 여기까지입니다! 수고하셨습니다!

</aside>

참고한 레퍼런스 ⇒

[2-01 URL과 뷰](https://wikidocs.net/70649)