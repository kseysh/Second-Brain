## 나의 풀이
```cpp
#include <vector>
#include <iostream>
#define MAX_LEN 500
using namespace std;

int n, m;
int arr[MAX_LEN + 1][MAX_LEN + 1];
int maxValue = 0;

int dy[4] = {0,-1,0,1};
int dx[4] = {1,0,-1,0};

bool inRange(int y, int x){
    return (y >= 0 && x >= 0 && y < n && x < m);
}

int main(){
    cin >> n >> m;
    for(int i = 0; i < n; i++){
        for(int j = 0; j < m; j++){
            cin >> arr[i][j];
        }
    }

    for(int i = 0; i < n; i++){
        for(int j = 0; j < m; j++){
            for(int d1 = 0; d1 < 4; d1++){
                for(int d2 = 0; d2 < 4; d2++){
                    if(d1 == (d2 + 6)%4) continue;
                    for(int d3 = 0; d3 < 4; d3++){
                        if(d2 == (d3 + 6)%4) continue;
                        for(int d4 = 0; d4 < 4; d4++){
                            if(d3 == (d4 + 6)%4) continue;
                            int n1y = i + dy[d1];
                            int n1x = j + dx[d1];
                            if(!inRange(n1y, n1x)) continue;
                            int n2y = n1y + dy[d2];
                            int n2x = n1x + dx[d2];
                            if(!inRange(n2y, n2x)) continue;
                            int n3y = n2y + dy[d3];
                            int n3x = n2x + dx[d3];
                            if(!inRange(n3y, n3x)) continue;
                            int n4y = n3y + dy[d4];
                            int n4x = n3x + dx[d4];
                            if(!inRange(n4y, n4x)) continue;
                            maxValue = max(maxValue, arr[n1y][n1x] + arr[n2y][n2x] + arr[n3y][n3x] + arr[n4y][n4x]);


                            if(d1 == d2 && d2 == d3){
                                n4y = n2y + dy[(d1 + 1) % 4];
                                n4x = n2x + dx[(d1 + 1) % 4];
                                if(inRange(n4y, n4x)){
                                    maxValue = max(maxValue, arr[n1y][n1x] + arr[n2y][n2x] + arr[n3y][n3x] + arr[n4y][n4x]);
                                }
                                n4y = n2y + dy[(d1 + 3) % 4];
                                n4x = n2x + dx[(d1 + 3) % 4];
                                if(inRange(n4y, n4x)){
                                    maxValue = max(maxValue, arr[n1y][n1x] + arr[n2y][n2x] + arr[n3y][n3x] + arr[n4y][n4x]);
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    cout << maxValue;
    return 0;
}
```
굳이 이렇게 하지 않고 깊이가 4인 DFS를 하면 되는 문제였다.....

DFS를 이용해 다시 풀어보자