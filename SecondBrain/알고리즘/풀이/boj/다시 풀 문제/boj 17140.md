```java
import java.io.*;  
import java.util.*;  
  
class Main {  
  
    static class Number implements Comparable<Number>{  
        int value, count;  
  
        Number(int v, int c){  
            this.value = v;  
            this.count = c;  
        }  
  
        @Override  
        public int compareTo(Number n){  
            if(this.count == n.count){  
                return this.value - n.value;  
            }  
            return this.count - n.count;  
        }  
    }  
  
  
    static int yLen = 3;  
    static int xLen = 3;  
    static final int SIZE = 3;  
    static final int[][] map = new int[100][100];   
  
    public static void main(String[] args) throws IOException {  
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));  
  
        StringTokenizer st = new StringTokenizer(br.readLine());  
  
        int r = Integer.parseInt(st.nextToken());  
        int c = Integer.parseInt(st.nextToken());  
        int k = Integer.parseInt(st.nextToken());  
  
        for(int y = 0; y < SIZE; y++){  
            st = new StringTokenizer(br.readLine());  
            for(int x = 0; x < SIZE; x++){  
                map[y][x] = Integer.parseInt(st.nextToken());  
            }  
        }  
  
        int time = 0;  
        while(time <= 100){  
  
            if(map[r - 1][c - 1] == k){  
                System.out.println(time);  
                return;  
            }  
  
            if(yLen >= xLen){  
                r();  
            }else{  
                c();  
            }  
            time++;  
        }  
  
        System.out.println(-1);  
    }  
  
    static void c(){  
        int maxLen = 0;  
        for(int x = 0; x < xLen; x++){  
            Map<Integer, Integer> m = new HashMap<>();  
            for(int y = 0; y < yLen; y++){  
                if(map[y][x] == 0) continue;  
                m.put(map[y][x], m.getOrDefault(map[y][x], 0) + 1);  
            }  
  
            List<Number> list = new ArrayList<>();  
            for(Map.Entry<Integer, Integer> e : m.entrySet()){  
                list.add(new Number(e.getKey(), e.getValue()));  
            }  
            Collections.sort(list);  
  
            int idx = 0;  
            for (Number num : list) {  
                if (idx >= 100) break; // 100개 넘어가면 버림  
                map[idx++][x] = num.value;  
                map[idx++][x] = num.count;  
            }  
            maxLen = Math.max(maxLen, idx);  
  
            while (idx < 100) {  
                map[idx++][x] = 0;  
            }  
        }  
        yLen = maxLen;  
  
    }  
  
    static void r(){  
        int maxLen = 0;  
        for(int y = 0; y < yLen; y++){  
            Map<Integer, Integer> m = new HashMap<>();  
            for(int x = 0; x < xLen; x++){  
                if(map[y][x] == 0) continue;  
                m.put(map[y][x], m.getOrDefault(map[y][x], 0) + 1);  
            }  
  
            List<Number> list = new ArrayList<>();  
            for(Map.Entry<Integer, Integer> e : m.entrySet()){  
                list.add(new Number(e.getKey(), e.getValue()));  
            }  
            Collections.sort(list);  
  
            int idx = 0;  
            for (Number num : list) {  
                if (idx >= 100) break; // 100개 넘어가면 버림  
                map[y][idx++] = num.value;  
                map[y][idx++] = num.count;  
            }  
            maxLen = Math.max(maxLen, idx);  
  
            while (idx < 100) {  
                map[y][idx++] = 0;  
            }  
        }  
  
        xLen = maxLen;  
    }  
}
```

저녁에는 머리가 안돌아가는지 헤멨다...
