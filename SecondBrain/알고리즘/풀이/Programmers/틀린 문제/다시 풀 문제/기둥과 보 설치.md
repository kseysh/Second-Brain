# 나의 풀이 (틀림)
```cpp
#include <string>
#include <vector>

#define MAX_N 100
#define COLUMN 0
#define BEAM 1
#define DELETE 0
#define INSTALL 1

using namespace std;

bool beams[MAX_N + 5][MAX_N + 5];
bool columns[MAX_N + 5][MAX_N + 5];
int n;

bool inRange(int y, int x){
    return y <= n && x <= n && y >= 0 && x >= 0;
}

bool checkWalls(){
    for(int y = 0; y <= n; y++){
        for(int x = 0; x <= n; x++){
            if(columns[y][x]){
                // 기둥은 벽을 벗어나지 않는다.
                // if(y == n) return false;
                // 기둥은 바닥위에 있으면 통과
                if(y == 0) continue;  
                // 다른 기둥 위에 있거나
                if(columns[y - 1][x]) continue;
                // 보의 한쪽 끝 부분위에 있어야 한다
                if(x == 0){
                    if(beams[y][0]) continue;
                }else{
                    if(beams[y][x] || beams[y][x - 1]) continue;    
                }
                
                return false;
            }
            if(beams[y][x]){
                // if(x == n) return false; // 벽면을 벗어나게 보를 설치할 수 없다
                if(y == 0) return false; // 바닥에 보를 설치하지 않는다.
                // 보는 한쪽 끝 부분이 기둥 위에 있거나
                if(columns[y - 1][x]) continue;  
                if(x != n && columns[y - 1][x+1]) continue;
                // 양쪽 끝 부분이 다른 보와 동시에 연결되어 있어야 한다.
                if(x == 0 || x == n) return false;
                if(beams[y][x-1] && beams[y][x+1]) continue;    
                
                return false; // 조건 불만족시 false
            }
        }
    }
    return true;
}

vector<vector<int>> solution(int nn, vector<vector<int>> build_frame) {
    n = nn;
    
    for(const vector<int> &v : build_frame){
        int x = v[0];
        int y = v[1];
        if(!inRange(y, x)) continue;
        bool isBeam = v[2];
        bool isInstall = v[3];

        if(isBeam){
            if(isInstall){
                beams[y][x] = true;
                if(!checkWalls()) beams[y][x] = false;
            }
            else {
                beams[y][x] = false;
                if(!checkWalls()) beams[y][x] = true;
            }
        }else{
            if(isInstall){
                columns[y][x] = true;
                if(!checkWalls()) columns[y][x] = false;
            }
            else {
                columns[y][x] = false;
                if(!checkWalls()) columns[y][x] = true;
            }
        }   
    }
    
    vector<vector<int>> answer;
    
    for(int x = 0; x <= n; x++){
        for(int y = 0; y <= n; y++){
            if(columns[y][x]){
                vector<int> v; 
                v.push_back(x);
                v.push_back(y);
                v.push_back(COLUMN);
                answer.push_back(v);
             }
            if(beams[y][x]){
                vector<int> v; 
                v.push_back(x);
                v.push_back(y);
                v.push_back(BEAM);
                answer.push_back(v);
             }
        }
    }
    
    return answer;
}
```
# 