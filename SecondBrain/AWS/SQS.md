- 서버들끼리 사용할 수 있는 메시지 큐를 제공하는 서비스
- 해야할 일을 나중에 처리하거나, 다른 시스템이 처리할 수 있도록 하기위한 비동기 메세징 서비스

### 메시지
- SQS의 기본 데이터 단위
- Json과 같은 텍스트 형태이며 최대 64KB까지 보낼 수 있다.
- **3~4KB짜리 메세지라도 64KB로 책정된다.** 따라서 용량이 작은 메세지를 자주 처리하는 것보다 메세지를 모아서 배치 API 로 처리하면 요금을 절약할 수 있다
### 큐
- 메시지를 담는 공간
- 담을 수 있는 메시지의 개수는 무제한
- 같은 리전 안에서는 데이터 전송 무료
### 배치 API 
- 배치 API 한 번에 메시지를 최대 10개 or 256KB까지 동시에 처리 가능
- 여러 메시지를 합쳐서 64KB 이하일 때, 배치 API를 이용하면 요청 1개로 청구됨

### Dead Letter Queues
설정한 retry 횟수를 초과하여 메시지를 받았는데 삭제되지 않고 남아있다면 처리 실패 큐로 보낸다.

 MQ에서 필터가 되는 큐 보기 

큐에서 글자를 저장하면 메모리를 많이 잡아먹을 수 있음
큐가 중앙 통제를 하는 것 같음 (분리해야 한다)
큐가 연관이 너무 많다.

step functions 상태를 보면서 분기 처리 가능

SQS

람다에 먼저 보내기


 10MB

조건

pdf는 3개까지 첨부할 수 있다.
pdf의 성공 실패는 개별로 처리되어야 한다.